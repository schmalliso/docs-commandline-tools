.. _mongotop:

============
``mongotop``
============

.. default-domain:: mongodb

.. contents:: On this page
   :local:
   :backlinks: none
   :depth: 1
   :class: singlecol

.. |tool-binary| replace:: :binary:`~bin.mongotop`

Description
-----------

:binary:`~bin.mongotop` provides a method to track the amount of time a
MongoDB instance :binary:`~bin.mongod` spends reading and writing data.
:binary:`~bin.mongotop` provides statistics on a per-collection level.
By default, :binary:`~bin.mongotop` returns values every second.

.. include:: /includes/extracts/dbtool-new-release.rst

.. note::

   This documentation is for version ``{+release+}`` of
   :binary:`~bin.mongotop`. 
   
   For documentation on the MongoDB 4.2 or earlier versions of
   ``mongotop``, reference the :manual:`MongoDB Server Documentation
   </reference/program>` for that version of the tool:

   *Quick links to older documentation*

   - `MongoDB 4.2 mongotop <https://docs.mongodb.com/v4.2/reference/program/mongotop>`__
   - `MongoDB 4.0 mongotop <https://docs.mongodb.com/v4.0/reference/program/mongotop>`__
   - `MongoDB 3.6 mongotop <https://docs.mongodb.com/v3.6/reference/program/mongotop>`__

.. include:: /includes/extracts/require-cmd-line-mongotop.rst


Availability
------------

.. include:: /includes/extracts/download-from-tools-mongotop.rst

Compatibility
-------------

.. include:: /includes/extracts/dbtool-compatibility-single.rst

Syntax
-------

.. include:: /includes/extracts/require-cmd-line-mongotop.rst

Default
~~~~~~~

.. code-block:: sh

   mongotop [frequency]

You can run :binary:`~bin.mongotop` without any command-line options to
connect to the :binary:`~bin.mongod` instance running on the localhost
port ``27017``. By default, :binary:`~bin.mongotop` returns values
every second.

.. code-block:: sh

   mongotop

To have :binary:`~bin.mongotop` report every 30 seconds, specify the
time:

.. code-block:: sh

   mongotop 30

When connected to a :binary:`~bin.mongod` instance, the program reports
first on the connection and then reports on the statistics at the
configured frequency.

.. code-block:: sh

   2019-04-29T15:35:27.785-0400	connected to: 127.0.0.1

                ns    total      read      write    <timestamp>
   <db.collection>    81802ms     0ms    81802ms   
   ...

Command Line Options
~~~~~~~~~~~~~~~~~~~~

.. binary:: mongotop

.. program:: mongotop

.. code-block:: sh

   mongotop [options] [frequency]

You can run :binary:`~bin.mongotop` with various :ref:`command-line
options <mongotop-options>`.
  
For example, to connect :binary:`~bin.mongotop` to a
:binary:`~bin.mongod` instance running on a remote host
``mongodb0.example.com`` and report every 30 seconds:

- You can include the desired frequency of reporting (in this
  example, 30 seconds) and the :option:`--uri <mongotop.--uri>`
  option to specify the host and port:

.. option:: --uri=<connectionString>

   Specify a resolvable :manual:`URI </reference/connection-string/>`
   connection string (enclose in quotes) to connect to the MongoDB deployment.
   
   .. code-block:: none
   
      --uri="mongodb://[username:password@]host1[:port1][,host2[:port2],...[,hostN[:portN]]][/[database][?options]]"
   
   For information on the components of the connection string, see
   the :manual:`Connection String URI Format
   </reference/connection-string/>` documentation. 
   
